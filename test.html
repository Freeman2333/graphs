<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>test</title>
  </head>
  <body>
    <!-- Added a button element -->
    <!-- <button id="main-button">Click Me timeout</button>
    <button id="main-button2">Click Me promise</button> -->

    <script>
      const promiseAll = (arr) => {
        return new Promise((res, rej) => {
          const result = [];
          let completedPromises = 0;

          for (let i = 0; i < arr.length; i++) {
            arr[i]
              .then((val) => {
                result[i] = val; // Store result at correct index
                completedPromises++;

                // Resolve only when all promises are resolved
                if (completedPromises === arr.length) {
                  res(result);
                }
              })
              .catch((err) => {
                rej(err); // Reject immediately on the first error
              });
          }
        });
      };
    </script>
  </body>
</html>
